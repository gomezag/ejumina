name: Build & Deploy
on:
  push:
    branches:
      - 'beta-release'
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Build
        uses: appleboy/ssh-action@v0.1.10
        with:
          host: ${{vars.NC_HST}} # Remote server address / ip - required
          username: ${{vars.NC_USR}} # Remote server user - required
          port: ${{secrets.NC_PORT}}
          key: ${{secrets.NC_DEPLOY_KEY}} # Private ssh key registered on the remote server - required
          passphrase: ${{secrets.NC_DEPLOY_PWD}}
          script: sh ~/scripts/build_production.sh